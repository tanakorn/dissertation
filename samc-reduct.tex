

\subsection{Reduction Ratio}
\label{eval-reduce}


Table~\ref{tab-reduce} compares the reduction ratio of SAMC over
black-box DPOR (bDP) with different budgets (\#crashes and \#reboots).
This evaluation is slightly different than the bug-finding speed evaluation
in Section~\ref{eval-oldbugs}.  Here, we measure how many executions in bDP
are considered redundant based on our reduction policies and
protocol-specific rules.  Specifically, we run bDP for
\numRedRatioExecs\ executions and run SAMC policies on the side to mark the
redundant executions.  The reduction ratio is then
\numRedRatioExecs\ divided by the number of non-redundant executions.
Table~\ref{tab-reduce} shows that SAMC provides between
\numMinRedRatio-\numMaxRedRatio\ execution reduction ratio in model
checking ZLE and ZAB protocols across different crash/reboot budgets.

\newtext{
Table~\ref{tab-reduce}b shows that with each policy the execution
reduction ratio increases when the number of crashes and reboots increases. 
With more crashes and reboots, the ZLE protocol generates more messages
and most of them are independent, and thus the LMI policy
has more opportunities to remove redundant message re-orderings.
Similarly, the crash and reboot symmetry policies give better benefits
with more crashes and reboots.
The table also shows that LMI provides the most reduction.  This is because
the number of message events is higher than crash and reboot events
(as also depicted in Table~\ref{tab-oldbugs}).}

We now discuss our reduction ratio with that of DIR~\cite{Guo+11-Demeter}.
As discussed earlier (\sec\ref{mot-samc-state}), DIR records local exploration
(thread interleavings) and replays future incoming messages whenever
possible, reducing the work of global exploration.  If the target system
does not have lots of thread interleavings, DIR's reduction ratio is
estimated to be between 10$^{1}$ to 10$^{3}$ (\sec5
of~\cite{Guo+11-Demeter}).  As we described earlier (\sec\ref{mot-samc-state}),
DIR is orthogonal to SAMC.  Thus, the reduction ratios of SAMC and DIR are
complementary; when both methods are combined, there is a potential for a
higher reduction ratio.  The DIR authors also hinted that domain knowledge
can guide dmcks (and also help their work) to both scale and hit deep bugs
(\sec{8} of~\cite{Guo+11-Demeter}).  SAMC has successfully addressed such
need.




\input{tab-reduce}

\newtext{ Finally, we note that in evaluating SAMC, we use execution
  reduction ratio as a primary metric.  Another classical metric to
  evaluate a model checker is state coverage (\eg, a dmck that covers more
  states can be considered a more powerful dmck).  However, in our
  observation state coverage is not a proper metric for evaluating
  optimization heuristics such as SAMC policies.  For example, if there
  are three nodes ABC that have the same role (\eg, follower),  a naive
  black-box dmck will crash each node and covers three distinct states: *BC,
  A*C and AB*.  However, with a semantic-aware approach (\eg, symmetry), we
  know that covering one of the states is sufficient.  Thus, less state
  coverage does not necessarily imply a less powerful dmck.  }


\if 0
\tl{why we use reduction ratio instead of state coverage} We do not use
state coverage as our metric because we found that state coverage is not
equal to bug-finding effectiveness and this was also stated in
~\cite{Guo+11-Demeter}. For example, in our case, when we use CRS and RSS,
if we have three nodes and all of them are in the same state, CRS will try
killing only one node, but normal dmck will try to kill all of them. In
this case, SAMC covers only one state, but normal dmck covers three state,
however, SAMC is more effective to discover bugs rather than normal dmck
because it does not try redundant symmetrical execution. We can see from
this example that state coverage is not a good metric so we choose to use
reduction ratio of execution instead of state coverage.
\fi

