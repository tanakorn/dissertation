


\chapter{Introduction}
\label{sec-intro}

% distributed systems are gaining more important
As more data and computation move from local to cloud settings, cloud
systems\footnote[1]{These systems are often referred with different
  names (\eg, cloud software infrastructure, datacenter operating
  systems). For simplicity, we use the term ``cloud systems''.}  such
as scale-out storage systems~\cite{Chang+06-BigTable,
  DeCandia+07-Dynamo, Ghemawat+03-GoogleFS, Nightingale+12-FlatFDS},
computing frameworks~\cite{DeanGhemawat04-MapReduce,
  Murray+13-NaiadTimelyDataflow}, synchronization
services~\cite{Burrows06-Chubby, Hunt+10-ZooKeeperPaper}, and cluster
management services~\cite{Hindman+11-Mesos, Kumar+13-Yarn} have become
a dominant backbone for many modern applications.  Client-side software is
getting thinner and more heavily relies on the capability,
reliability, and availability of cloud systems.  Unfortunately, such
large-scale distributed systems remain difficult to get right.
Guaranteeing reliability has proven to be challenging in these
systems~\cite{Gunawi+11-FateDestini,  Guo+11-Demeter, Yang+09-Modist}.




% model checking, and dmck
Software (implementation-level) model checking is one powerful method
of verifying systems reliability~\cite{Godefroid+97-Verisoft,
  Yang+06-Explode, Yang+04-FiSC}.  The last five years have seen a
rise of software model checkers targeted for distributed
systems~\cite{Guerraoui+11-McNoNetwork, Guo+11-Demeter, Simsa+10-Dbug,
  Yabandeh+09-CrystalBall, Yang+09-Modist}; for brevity, we categorize
such systems as {\em dmck} (distributed system model checker).  Dmck
works by exercising all possible sequences of events (\eg, different
reorderings of messages), and hereby pushing the target system into
corner-case situations and unearthing hard-to-find bugs.  To address
the state-space explosion problem, existing dmcks adopt advanced state
reduction techniques such as dynamic partial order reduction (DPOR),
making them mature and highly practical for checking large-scale
systems~\cite{Guo+11-Demeter, Yang+09-Modist}.


% failure failure failure
Despite these early successes, existing dmcks unfortunately fall short
in addressing present reliability challenges of cloud systems.  In
particular, large-scale cloud systems are expected to be highly reliable
in dealing with complex failures, not just one instance, but {\em multiple}
of them.  However, to the best of our knowledge, {\em no} existing
dmcks can exercise multiple failures without exploding the state space.
We elaborate this issue later; for now, we discuss complex failures in
cloud environments.

% failures 
Cloud systems run on large clusters of unreliable commodity machines,
an environment that produces a growing number and frequency of
failures, including ``surprising''
failures~\cite{Birman+09-CloudAgenda, Henry09-AmazonFUD}.  Therefore,
it is common to see complex failure-induced bugs such as the one
below.

\input{code-zk}

% deep bug
The bug above is what we categorize as {\em deep bug}.  To unearth deep
bugs, dmck must permute a large number of events, not only network
events (messages), but also {\em crashes} and {\em reboots}.
Although arguably deep bugs occur with lower probabilities than
``regular'' bugs, deep bugs do occur in large-scale deployments and
have harmful consequences (\sec\ref{mot-deep}).  We observe that
cloud developers are prompt in fixing deep bugs (in few weeks) as they
seem to believe in Murphy's law; at scale, anything that can go wrong
will go wrong.


% page two starts here

% issues of dmck today, and the question
As alluded above, the core problem is that state-of-the-art 
dmcks~\cite{Guerraoui+11-McNoNetwork, Guo+11-Demeter,
  Killian+07-LifeDeathMaceMC, Simsa+10-Dbug, Yabandeh+09-CrystalBall,
  Yang+09-Modist} do not incorporate failure events to their state
exploration strategies.  They mainly address scalability issues
related to message re-orderings.  Although some dmcks are capable of
injecting failures, usually they only exercise at most one failure.
The reason is simple: exercising crash/reboot events will
exacerbate the state-space explosion problem.  In
this regard, existing dmcks do not scale and take very long
time to unearth deep bugs.  This situation led us to ask: {\it how
  should we advance dmck to discover deep bugs quickly and
  systematically, and thereby address present reliability challenges
  of cloud systems in dealing with complex failures?}

